<span class="page-title-dynamic d-none">{{pageTitle}}</span> <!-- Remove line when refactored into production code -->
<div class="form-wrapper">
    <header class="form-header">
        Sign up
    </header>
    <div class="form-body">
        <form class="form-signup">
            <div class="input-group">
                <label for="username-signup">Username:</label>
                <input type="text" id="username-signup" />
            </div>
            <div class="input-group">
                <label for="password-signup">Password:</label>
                <input type="password" id="password-signup" />
            </div>
            <div>
            <button class="standout" type="submit" data-route="/signup">Sign Up!</button>
            <a href="/login">Login instead</a>
            </div>
        </form>
    </div> <!-- form-body -->
</div> <!-- form-wrapper -->
<script>

$(".form-signup").on("submit", async(event)=>{
    event.preventDefault();
    let username = $("#username-signup").val();
    let password = $("#password-signup").val();
    debugger;

    if (username && password) {
        debugger;
        $.post("/api/signup", {username, password}).always((data,err)=>{
            debugger;
            if(data.loggedIn) {
                document.location.pathname = "/";
            } else {
                alert("Error: See browser console for details");
                console.error({error});
            }
        });
    }
});
</script>